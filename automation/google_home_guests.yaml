## Notify Guests that house is cooling for the night
- id: notification_google_notify_guests_heating_cool
  alias: Notification Google Notify Guests of Heating Cooling
  trigger:
    - platform: time
      at: "21:50:00" # Run at 9:50, at 10pm volume is lowered.
  condition:
    condition: and # all are true
    conditions:
    # - condition: state
    #   entity_id: group.presence_kareem
    #   state: "not_home"
    - condition: or # one of these is true
      conditions:
      - condition: state
        entity_id: input_select.presence_house
        state: Home Guests
      - condition: state
        entity_id: input_select.presence_house
        state: Away Guests
    - condition: or # one of these is true
      conditions:
      - condition: state
        entity_id: group.presence_friends
        state: "home"
      - condition: state
        entity_id: input_boolean.friends_visiting
        state: "on"
  action:
      # set volume
      # reset volumes
    - service: tts.google_say
      entity_id: media_player.the_whole_house
      data_template:
        message: "Attention guests. This is an automated house message. At 11pm the heating is cooling to {{ states('input_number.temp_night') }} degrees until 6am."
    - service: notify.pushbullet
      data: 
        target: !secret email_target_pushbullet
        title: "Guests Notified about heating"
        message: "Guests Notified about heating!"

## Google Home Voice TTS Welcome Home Guests
- id: notification_google_notify_guests_kareem_is_outside
  alias: Notification Google Notify Guests Kareem is outside
  trigger:
    - platform: state
      entity_id: input_select.presence_house
      to: Away Guests Never # will never be triggered, state does not exist
  action:
    - service: input_number.set_value
      data_template:
        value: 0.6
        entity_id:
          - media_player.the_whole_house
    - service: tts.google_say
      entity_id: media_player.the_whole_house
      data:
        message: 'Attention Guests. This is an automated house message. Kareem is outside trying to enter the house. Someone please let him in.'
