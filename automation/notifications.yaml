##################################
#### NOTIFICATION AUTOMATIONS ####
##################################

## Tell me when Home Assistant starts/restarts
- id: ha_notification_startup
  alias: HA Notification Startup
  trigger:
    - platform: homeassistant
      event: start
  action:
    - service: notify.pushbullet
      data: 
        target: !secret email_target_pushbullet
        title: "Home Assistant Started!"
        message: "Home Assistant started and available!"

## Tell me when Home Assistant Stopping/Shutdown
- id: ha_notification_shutdown
  alias: HA Notification Shutdown
  trigger:
    - platform: homeassistant
      event: shutdown
  action:
    - service: notify.pushbullet
      data: 
        target: !secret email_target_pushbullet
        title: "Home Assistant Stopping!"
        message: "Home Assistant shutting down!"

## Tell me when Home Assistant update available
- id: ha_notification_available
  alias: HA Notification Update Available
  trigger:
    - platform: state
      entity_id: updater.updater
  action:
    - service: notify.pushbullet
      data: 
        target: !secret email_target_pushbullet
        title: "New Home Assistant Release"
        message: "Home Assistant  {{ states.updater.updater.state }}  is now available."

## Tell me when new devices detected on network
- id: ha_notification_new_nmap_device
  alias: HA Notification New NMAP Device
  trigger:
    - platform: event
      event_type: device_tracker_new_device
  action:
    - service: notify.pushbullet
      data:
        target: !secret email_target_pushbullet
        title: "New Device detected!"
        message: "New unknown NMAP device detected!"
#        message: "New unknown NMAP device detected! > {{ states.updater.updater.state }}"

## Tell me there is an intruder ## entrance
- id: ha_notification_there_is_an_intruder_entrance
  alias: HA Notification There is an intruder ENTRANCE
  trigger:
    - platform: state
      entity_id: !secret coolcam_motion_sensor_1
      from: "off"
      to: "on"
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: input_select.presence_house
      state: Away
  action:
    - service: notify.pushbullet
      data: 
        target: !secret email_target_pushbullet
        title: "ALERT! Movement at Home!"
        message: "Movement has been detected at ENTRANCE!"

## Tell me there is an intruder ## downstairs
- id: ha_notification_there_is_an_intruder_downstairs
  alias: HA Notification There is an intruder DOWNSTAIRS
  trigger:
    - platform: state
      entity_id: !secret coolcam_motion_sensor_2
      from: "off"
      to: "on"
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: input_select.presence_house
      state: Away
  action:
    - service: notify.pushbullet
      data: 
        target: !secret email_target_pushbullet
        title: "ALERT! Movement at Home!"
        message: "Movement has been detected DOWNSTAIRS!"

## Tell me there is an intruder ## upstairs
- id: ha_notification_there_is_an_intruder_upstairs
  alias: HA Notification There is an intruder UPSTAIRS
  trigger:
    - platform: state
      entity_id: !secret 6in1_sensor_move_1
      from: "off"
      to: "on"
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: input_select.presence_house
      state: Away
  action:
    - service: notify.pushbullet
      data: 
        target: !secret email_target_pushbullet
        title: "ALERT! Movement at Home!"
        message: "Movement has been detected UPSTAIRS!"

## Tell me there is an intruder ## living room
- id: ha_notification_there_is_an_intruder_livingroom
  alias: HA Notification There is an intruder LIVINGROOM
  trigger:
    - platform: state
      entity_id: !secret 6in1_sensor_move_2
      from: "off"
      to: "on"
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: input_select.presence_house
      state: Away
  action:
    - service: notify.pushbullet
      data: 
        target: !secret email_target_pushbullet
        title: "ALERT! Movement at Home!"
        message: "Movement has been detected at LIVINGROOM!"

## Notify Door Strike reset activated
- id: ha_notification_door_strike_active
  alias: HA Notification Door Strike active
  trigger:
    - platform: state
      entity_id: switch.pi_door_strike
      to: "on"
    - platform: state
      entity_id: lock.poppdoorswitch_1_6
      to: "unlocked"
  action:
    - service: notify.pushbullet
      data: 
        target: !secret email_target_pushbullet
        message: "Door Strike activated!"

## Door Strike reset after 4 seconds
- id: ha_notification_rl_door_strike_reset
  alias: HA Notification RL Door Strike reset
  trigger:
    - platform: state
      entity_id: switch.pi_door_strike
      to: "on"
      for:
        seconds: 4
  action:
    - service: homeassistant.turn_off
      entity_id:
        - switch.pi_door_strike
    - service: notify.pushbullet
      data: 
        target: !secret email_target_pushbullet
        message: "RL Door Strike reset!"

## Door Strike reset after 4 seconds
- id: ha_notification_zw_door_strike_reset
  alias: HA Notification ZW Door Strike reset
  trigger:
    - platform: state
      entity_id: lock.poppdoorswitch_1_6
      to: "locked"
  action:
    - service: notify.pushbullet
      data: 
        target: !secret email_target_pushbullet
        message: "ZW Door Strike reset!"

## Tell me there is an emergency
#tbc